<script src="{{ 'shop.js' |  asset_url }}" defer></script>
<script src="{{ 'facets.js' |  asset_url }}" defer></script>

<div class="flat-spacing">
  <div class="container">
    <div class="tf-shop-control">
      <div class="tf-control-filter">
        <a href="#filterShop" data-bs-toggle="offcanvas" aria-controls="filterShop" class="tf-btn-filter">
          <span class="icon icon-filter"></span><span class="text">Filter</span></a
        >
      </div>
      <ul class="tf-control-layout">
        <li class="tf-view-layout-switch sw-layout-2" data-value-layout="tf-col-2">
          <i class="icon-grid-2"></i>
        </li>
        <li class="tf-view-layout-switch sw-layout-3 d-none d-md-flex" data-value-layout="tf-col-3">
          <i class="icon-grid-3"></i>
        </li>
        <li class="tf-view-layout-switch sw-layout-4 d-none d-xl-flex active" data-value-layout="tf-col-4">
          <i class="icon-grid-4"></i>
        </li>
        <li class="tf-view-layout-switch sw-layout-5 d-none d-xxl-flex" data-value-layout="tf-col-5">
          <i class="icon-grid-5"></i>
        </li>
        <li class="tf-view-layout-switch sw-layout-6 d-none d-xxl-flex" data-value-layout="tf-col-6">
          <i class="icon-grid-6"></i>
        </li>
        <li class="br-line type-vertical"></li>
        <li class="tf-view-layout-switch sw-layout-list list-layout" data-value-layout="list">
          <i class="icon-list"></i>
        </li>
      </ul>

      {% comment %} Sorting Controller {% endcomment %}
      <facet-filters-form>
        <form id="FacetFiltersForm" method="get" class="facet-filters-form">
          <div class="tf-control-sorting">
            <p class="h6 d-none d-lg-block">Sort by:</p>
            <div class="tf-dropdown-sort" data-bs-toggle="dropdown">
              {%- assign sort_by = collection.sort_by | default: collection.default_sort_by -%}
              {%- assign selected_option = collection.sort_options | where: 'value', sort_by | first -%}
              <div class="btn-select">
                <span class="text-sort-value">{{ selected_option.name }}</span>
                <span class="icon icon-caret-down"></span>
              </div>
              <div class="dropdown-menu">
                {%- for option in collection.sort_options -%}
                  <div 
                    class="select-item{% if option.value == sort_by %} active{% endif %}" 
                    data-sort-value="{{ option.value | escape }}"
                  >
                    <span class="text-value-item">{{ option.name | escape }}</span>
                  </div>
                {%- endfor -%}
              </div>
              <input type="hidden" name="sort_by" value="{{ sort_by }}">
            </div>
          </div>
        </form>
      </facet-filters-form>
    </div>

    {% comment %} Column {% endcomment %}
    <div id="ProductGridContainer" class="position-relative">
      <div class="collection-loading-overlay"></div>
      <div id="product-grid" data-id="{{ section.id }}">
        
        {% comment %} Grid layouts {% endcomment %}
        <div class="wrapper-shop tf-grid-layout tf-col-4" id="gridLayout">
          {%- paginate collection.products by 12 -%}
            {%- for product in collection.products -%}
              {% render 'card-product', product: product %}
            {%- endfor -%}

            {%- if paginate.pages > 1 -%}
              <!-- Pagination -->
              {% render 'pagination', paginate: paginate %}
            {%- endif -%}
          {%- endpaginate -%}
        </div>

        {% comment %} List layout {% endcomment %}
        <div class="tf-list-layout wrapper-shop" id="listLayout" style="display: none;">
          {%- paginate collection.products by 12 -%}
            {%- for product in collection.products -%}
              {% render 'card-product-horizontal', product: product %}
            {%- endfor -%}
            
            {%- if paginate.pages > 1 -%}
              <!-- Pagination -->
              {% render 'pagination', paginate: paginate %}
            {%- endif -%}
          {%- endpaginate -%}
        </div>
      </div>
    </div>
  </div>
</div>

{% comment %}
  <div class="offcanvas offcanvas-start canvas-filter" id="filterShop">
    <div class="canvas-wrapper">
        <div class="canvas-header">
            <span class="title h3 fw-medium">Filter</span>
            <span class="icon-close link icon-close-popup fs-24" data-bs-dismiss="offcanvas"></span>
        </div>
        <div class="canvas-body">
            <div class="widget-facet">
                <div class="facet-title" data-bs-target="#category" role="button" data-bs-toggle="collapse" aria-expanded="true"
                    aria-controls="category">
                    <span class="h4 fw-semibold">Category</span>
                    <span class="icon icon-caret-down fs-20"></span>
                </div>
                <div id="category" class="collapse show">
                    <ul class="collapse-body filter-group-check group-category">
                        <li class="list-item">
                            <a href="shop-default.html" class="link h6">T-shirts<span class="count">23</span></a>
                        </li>
                        <li class="list-item">
                            <a href="shop-default.html" class="link h6">Footwear<span class="count">44</span></a>
                        </li>
                        <li class="list-item">
                            <a href="shop-default.html" class="link h6">Shirts<span class="count">75</span></a>
                        </li>
                        <li class="list-item">
                            <a href="shop-default.html" class="link h6">Dresses<span class="count">33</span></a>
                        </li>
                        <li class="list-item">
                            <a href="shop-default.html" class="link h6">Underwear<span class="count">45</span></a>
                        </li>
                        <li class="list-item">
                            <a href="shop-default.html" class="link h6">Accessories<span class="count">32</span></a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="widget-facet">
                <div class="facet-title" data-bs-target="#availability" role="button" data-bs-toggle="collapse" aria-expanded="true"
                    aria-controls="availability">
                    <span class="h4 fw-semibold">Availability</span>
                    <span class="icon icon-caret-down fs-20"></span>
                </div>
                <div id="availability" class="collapse show">
                    <ul class="collapse-body filter-group-check current-scrollbar">
                        <li class="list-item">
                            <input type="radio" name="availability" class="tf-check" id="inStock">
                            <label for="inStock" class="label">
                                <span>In Stock</span><span class="count">23</span>
                            </label>
                        </li>
                        <li class="list-item disabled">
                            <input type="radio" name="availability" class="tf-check" id="outStock">
                            <label for="outStock" class="label">
                                <span>Out of Stock</span><span class="count">34</span>
                            </label>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="widget-facet">
                <div class="facet-title" data-bs-target="#price" role="button" data-bs-toggle="collapse" aria-expanded="true"
                    aria-controls="price">
                    <span class="h4 fw-semibold">Price</span>
                    <span class="icon icon-caret-down fs-20"></span>
                </div>
                <div id="price" class="collapse show">
                    <div class="collapse-body widget-price filter-price">
                        <div class="price-val-range" id="price-value-range" data-min="0" data-max="500"></div>
                        <div class="box-value-price">
                            <span class="h6 text-main">Price:</span>
                            <div class="price-box">
                                <div class="price-val" id="price-min-value" data-currency="$"></div>
                                <span>-</span>
                                <div class="price-val" id="price-max-value" data-currency="$"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="widget-facet">
                <div class="facet-title" data-bs-target="#brand" role="button" data-bs-toggle="collapse" aria-expanded="true"
                    aria-controls="brand">
                    <span class="h4 fw-semibold">Brand</span>
                    <span class="icon icon-caret-down fs-20"></span>
                </div>
                <div id="brand" class="collapse show">
                    <ul class="collapse-body filter-group-check current-scrollbar">
                        <li class="list-item">
                            <input type="checkbox" name="brand" class="tf-check" id="automet">
                            <label for="automet" class="label">AUTOMET</label>
                        </li>
                        <li class="list-item">
                            <input type="checkbox" name="brand" class="tf-check" id="trendy-queen">
                            <label for="trendy-queen" class="label">Trendy Queen</label>
                        </li>
                        <li class="list-item">
                            <input type="checkbox" name="brand" class="tf-check" id="wiholl">
                            <label for="wiholl" class="label">WIHOLL</label>
                        </li>
                        <li class="list-item">
                            <input type="checkbox" name="brand" class="tf-check" id="real-essentials">
                            <label for="real-essentials" class="label">Real Essentials</label>
                        </li>
                        <li class="list-item">
                            <input type="checkbox" name="brand" class="tf-check" id="dokotoo">
                            <label for="dokotoo" class="label">Dokotoo</label>
                        </li>
                        <li class="list-item">
                            <input type="checkbox" name="brand" class="tf-check" id="hanes">
                            <label for="hanes" class="label">Hanes</label>
                        </li>
                        <li class="list-item">
                            <input type="checkbox" name="brand" class="tf-check" id="zeagoo">
                            <label for="zeagoo" class="label">Zeagoo</label>
                        </li>
                        <li class="list-item">
                            <input type="checkbox" name="brand" class="tf-check" id="shewin">
                            <label for="shewin" class="label">SHEWIN</label>
                        </li>
                        <li class="list-item">
                            <input type="checkbox" name="brand" class="tf-check" id="blooming-jelly">
                            <label for="blooming-jelly" class="label">Blooming Jelly</label>
                        </li>
                        <li class="list-item">
                            <input type="checkbox" name="brand" class="tf-check" id="fisoew">
                            <label for="fisoew" class="label">Fisoew</label>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="widget-facet">
                <div class="facet-title" data-bs-target="#size" role="button" data-bs-toggle="collapse" aria-expanded="true" aria-controls="size">
                    <span class="h4 fw-semibold">Size</span>
                    <span class="icon icon-caret-down fs-20"></span>
                </div>
                <div id="size" class="collapse show">
                    <div class="collapse-body filter-size-box flat-check-list">
                        <div class="check-item size-item size-check"><span class="size h6">XS</span></div>
                        <div class="check-item size-item size-check"><span class="size h6">S</span></div>
                        <div class="check-item size-item size-check"><span class="size h6">L</span></div>
                        <div class="check-item size-item size-check"><span class="size h6">M</span></div>
                        <div class="check-item size-item size-check"><span class="size h6">XL</span></div>
                        <div class="check-item size-item size-check"><span class="size h6">2XL</span></div>
                        <div class="check-item size-item size-check over-size"><span class="size h6">Over size</span></div>
                    </div>
                </div>
            </div>
            <div class="widget-facet">
                <div class="facet-title" data-bs-target="#color" role="button" data-bs-toggle="collapse" aria-expanded="true"
                    aria-controls="size">
                    <span class="h4 fw-semibold">Color</span>
                    <span class="icon icon-caret-down fs-20"></span>
                </div>
                <div id="color" class="collapse show">
                    <div class="collapse-body filter-color-box flat-check-list">
                        <div class="check-item color-item color-check">
                            <span class="color bg-light-purple"></span>
                            <span class="color-text">Purple</span>
                        </div>
                        <div class="check-item color-item color-check">
                            <span class="color bg-dark-charcoal"></span>
                            <span class="color-text">Dark</span>
                        </div>
                        <div class="check-item color-item color-check line">
                            <span class="color bg-dark-jade"></span>
                            <span class="color-text">Green</span>
                        </div>
                        <div class="check-item color-item color-check">
                            <span class="color bg-light-beige"></span>
                            <span class="color-text">Beige</span>
                        </div>
                        <div class="check-item color-item color-check">
                            <span class="color bg-sage-green"></span>
                            <span class="color-text">Sage Green</span>
                        </div>
                        <div class="check-item color-item color-check">
                            <span class="color bg-tomato"></span>
                            <span class="color-text">Light Orange</span>
                        </div>
                        <div class="check-item color-item color-check">
                            <span class="color bg-honey-orange"></span>
                            <span class="color-text">Orange</span>
                        </div>
                        <div class="check-item color-item color-check">
                            <span class="color bg-dark-olive"></span>
                            <span class="color-text">Dark Olive</span>
                        </div>
                        <div class="check-item color-item color-check">
                            <span class="color bg-hot-pink"></span>
                            <span class="color-text">Pink</span>
                        </div>
                        <div class="check-item color-item color-check">
                            <span class="color bg-muted-violet"></span>
                            <span class="color-text">Dark Violet</span>
                        </div>
                        <div class="check-item color-item color-check">
                            <span class="color bg-dusty-olive"></span>
                            <span class="color-text">Dusty Olive</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="canvas-bottom">
            <button id="reset-filter" class="tf-btn btn-reset">Reset Filters</button>
        </div>
    </div>
  </div>
{% endcomment %}
