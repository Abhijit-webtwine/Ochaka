{% paginate blog.articles by section.settings.posts_per_page %}
<div class="flat-spacing" id="BlogGridContainer" data-id="{{ section.id }}">
  <div class="container">
    <div class="row">
      <div class="col-xl-9 col-lg-8">
        <div class="tf-grid-layout row-xl-gap-40">
          {%- for article in blog.articles -%}
            <div class="article-blog style-row hover-img4">
              <a href="{{ article.url }}" class="entry_image img-style4" style="max-width: 333px;flex-basis: 333px;">
                <img
                  src="{{ article.image | image_url: width: 800 }}"
                  data-src="{{ article.image | image_url: width: 800 }}"
                  alt="{{ article.image.alt | escape }}"
                  class="lazyload"
                  width="{{ article.image.width }}"
                  height="{{ article.image.height }}"
                >
              </a>
              <div class="blog-content">
                <span class="entry_date name-tag h6 link">{{ article.published_at | date: "%B %d, %Y" }}</span>
                <a href="{{ article.url }}" class="entry_name link h4">
                  {{ article.title }}
                </a>
                <p class="text h6">
                  {{ article.excerpt_or_content | strip_html | truncatewords: 30 }}
                </p>
                <a href="{{ article.url }}" class="tf-btn-line">
                  {{ 'blogs.article.read_more' | t | default: 'Read more' }}
                </a>
              </div>
            </div>
          {%- else -%}
            <p>No articles found</p>
          {%- endfor -%}

          {%- if paginate.pages > 1 -%}
            <div class="wd-full wg-pagination">
              {% render 'pagination', paginate: paginate %}
            </div>
          {%- endif -%}
        </div>
      </div>
      <div class="col-xl-3 col-lg-4 d-none d-lg-block">
        {% render 'sidebar-blog', sticky: true %}
      </div>
    </div>
  </div>
</div>
{% endpaginate %}

<div class="btn-sidebar-mb d-lg-none right">
  <button data-bs-toggle="offcanvas" data-bs-target="#mbSidebar">
    <i class="icon icon-sidebar"></i>
  </button>
</div>

<div class="offcanvas offcanvas-end canvas-sidebar" id="mbSidebar">
  <div class="canvas-wrapper">
    <div class="canvas-header">
      <span class="title h4 fw-bold">Sidebar</span>
      <span class="icon-close link icon-close-popup" data-bs-dismiss="offcanvas"></span>
    </div>
    <div class="canvas-body sidebar-mobile-append blog-sidebar">
      {% render 'sidebar-blog' %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Blog list",
  "settings": [
    {
      "type": "range",
      "id": "posts_per_page",
      "min": 1,
      "max": 20,
      "step": 1,
      "default": 4,
      "label": "Posts per page"
    }
  ],
  "blocks": [
    {
      "type": "search",
      "name": "Search",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Search blog"
        }
      ]
    },
    {
      "type": "categories",
      "name": "Categories",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Category"
        }
      ]
    },
    {
      "type": "recent_posts",
      "name": "Recent posts",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Recent Post"
        },
        {
          "type": "range",
          "id": "limit",
          "min": 1,
          "max": 5,
          "step": 1,
          "default": 3,
          "label": "Limit"
        }
      ]
    },
    {
      "type": "tags",
      "name": "Tags",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Tags"
        }
      ]
    },
    {
      "type": "instagram",
      "name": "Instagram",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Instagram"
        },
        {
          "type": "image_picker",
          "id": "image_1",
          "label": "Image 1"
        },
        {
          "type": "image_picker",
          "id": "image_2",
          "label": "Image 2"
        },
        {
          "type": "image_picker",
          "id": "image_3",
          "label": "Image 3"
        },
        {
          "type": "image_picker",
          "id": "image_4",
          "label": "Image 4"
        },
        {
          "type": "image_picker",
          "id": "image_5",
          "label": "Image 5"
        },
        {
          "type": "image_picker",
          "id": "image_6",
          "label": "Image 6"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        }
      ]
    },
    {
      "type": "banner",
      "name": "Banner",
      "limit": 1,
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "sub_title",
          "label": "Sub title",
          "default": "Sale Upto 45%"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Fall winter collection"
        },
        {
          "type": "text",
          "id": "button_label",
          "label": "Button label",
          "default": "Shop now"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Blog list",
      "blocks": [
        {
          "type": "search"
        },
        {
          "type": "categories"
        },
        {
          "type": "recent_posts"
        },
        {
          "type": "tags"
        },
        {
          "type": "instagram"
        },
        {
          "type": "banner"
        }
      ]
    }
  ]
}
{% endschema %}
