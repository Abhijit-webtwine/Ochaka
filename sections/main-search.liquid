<div class="modal modalCentered fade modal-search" id="search">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <span class="icon-close icon-close-popup" data-bs-dismiss="modal"></span>

      {% comment %}
        <div>
          <!-- Quick links -->
          <ul class="quick-link-list">
            {% for link in linklists['quick-search'].links %}
              <li>
                <a href="{{ link.url }}" class="link-item text-main h6 link">
                  {{ link.title }}
                </a>
              </li>
            {% endfor %}
          </ul>
        </div>

        <!-- Search history (static placeholder – Shopify has no native history) -->
        <div class="view-history-wrap">
          <h4 class="title">History</h4>
          <div class="view-history-list">
            {% for item in search.results limit: 6 %}
              {% if item.object_type == 'product' %}
                <a class="item text-main link h6" href="{{ item.url }}">
                  <span>{{ item.title }}</span>
                  <i class="icon icon-arrow-top-right"></i>
                </a>
              {% endif %}
            {% endfor %}
          </div>
        </div>
      {% endcomment %}

      <!-- Search form -->
      <predictive-search
        data-per-page="4"
        data-loading-text="Loading..."
      >
        <form class="search" role="search">
          <input type="search" name="q" placeholder="Search item">
          <button class="visually-hidden" type="submit">Search</button>
          <button class="visually-hidden" type="reset">Clear</button>
          <button class="visually-hidden" type="button">Close</button>
        </form>

        <!-- Quick links -->
        <div>
          <ul class="quick-link-list">
            {% for link in linklists['quick-search'].links %}
              <li>
                <a href="{{ link.url }}" class="link-item text-main h6 link">
                  {{ link.title }}
                </a>
              </li>
            {% endfor %}
          </ul>
        </div>

        <!-- Search history (static placeholder – Shopify has no native history) -->
        <div class="view-history-wrap">
          <h4 class="title">History</h4>
          <div class="view-history-list">
            {% for item in search.results limit: 6 %}
              {% if item.object_type == 'product' %}
                <a class="item text-main link h6" href="{{ item.url }}">
                  <span>{{ item.title }}</span>
                  <i class="icon icon-arrow-top-right"></i>
                </a>
              {% endif %}
            {% endfor %}
          </div>
        </div>

        <div class="predictive-search" data-predictive-search></div>
        <span class="predictive-search-status visually-hidden" role="status" aria-hidden="true"></span>

      </predictive-search>

      <!-- Trending products -->
      <div class="trend-product-wrap">
        <div class="heading">
          <h4 class="title flex-grow-1">Trending product</h4>
          <a href="{{ collections.all.url }}" class="tf-btn-line has-icon none-line fw-medium fs-18 text-normal">
            View All Product
            <i class="icon icon-caret-circle-right"></i>
          </a>
        </div>

        {% assign trending_collection = collections[settings.search_trending_collection] %}

        <div class="trend-product-inner">
          {% if trending_collection != blank %}
            {% for product in trending_collection.products limit: 4 %}
              {% if forloop.index0 == 0 or forloop.index0 == 2 %}
                <div class="trend-product-list">
              {% endif %}

              <div class="trend-product-item">
                {% render 'mega-product-horizontal', product: product %}
              </div>

              {% if forloop.index0 == 1 or forloop.index0 == 3 %}
                </div>
              {% endif %}
            {% endfor %}
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
