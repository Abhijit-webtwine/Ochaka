<div class="themesFlat">
  <div class="container-full">
    {% if section.settings.heading != blank %}
      <div class="h1 sect-title text-black fw-medium text-center wow fadeInUp">
        {{ section.settings.heading }}
      </div>
    {% endif %}

    <div class="row">
      <!-- LEFT COLLECTION BANNER -->
      <div class="col-xl-4">
        {% assign collection = section.settings.collection %}
        {% if collection != blank %}
          <div class="box-image_V01 hover-img mb-xl-0 wow fadeInUp">
            <a href="{{ collection.url }}" class="box-image_image img-style">
              {% if section.settings.collection_image != blank %}
                {{
                  section.settings.collection_image
                  | image_url: width: 900
                  | image_tag:
                    loading: 'lazy',
                    class: 'lazyload',
                    alt: collection.title
                }}
              {% elsif collection.featured_image %}
                {{
                  collection.featured_image
                  | image_url: width: 900
                  | image_tag:
                    loading: 'lazy',
                    class: 'lazyload',
                    alt: collection.title
                }}
              {% endif %}
            </a>
            <div class="box-image_content">
              <a href="{{ collection.url }}" class="title text-display fw-semibold text-white link">
                {{ collection.title }}
              </a>
              <span class="sub-title h5 text-white">
                {{ collection.products_count }} product{% if collection.products_count != 1 %}s{% endif %}
              </span>
              <a href="{{ collection.url }}" class="tf-btn-line style-white">
                {{ section.settings.collection_button_text }}
              </a>
            </div>
          </div>
        {% endif %}
      </div>

      <!-- RIGHT PRODUCT SLIDER -->
      <div class="col-xl-8">
        <div
          dir="ltr"
          class="swiper tf-swiper wrap-sw-over wow fadeInUp"
          data-preview="3"
          data-tablet="3"
          data-mobile-sm="2"
          data-mobile="2"
          data-space-lg="48"
          data-space-md="30"
          data-space="12"
          data-pagination="2"
          data-pagination-sm="2"
          data-pagination-md="3"
          data-pagination-lg="3"
        >
          <div class="swiper-wrapper">
            {% for block in section.blocks %}
              {% assign product = block.settings.product %}
              {% if product != blank %}
                <div class="swiper-slide" {{ block.shopify_attributes }}>
                  {% render 'card-product', product: product %}
                </div>
              {% endif %}
            {% endfor %}
          </div>

          <div class="sw-dot-default tf-sw-pagination"></div>
        </div>
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Shop This Look",
  "settings": [
    {
      "type": "image_picker",
      "id": "collection_image",
      "label": "Custom collection image (optional)",
      "info": "If set, this image will be used instead of the collection featured image."
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Section heading",
      "default": "Shop This Look"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Featured collection"
    },
    {
      "type": "text",
      "id": "collection_button_text",
      "label": "Collection button text",
      "default": "EXPLORE NOW"
    }
  ],
  "blocks": [
    {
      "type": "product",
      "name": "Product",
      "settings": [
        {
          "type": "product",
          "id": "product",
          "label": "Select product"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Shop This Look",
      "category": "Products",
      "blocks": [{ "type": "product" }, { "type": "product" }, { "type": "product" }]
    }
  ]
}
{% endschema %}
